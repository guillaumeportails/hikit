<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="description" content="Leaflet of the USA with embedded GEOJSONs + IG feed">
	<link rel="stylesheet" type="text/css" href="flex.css" />
	<link href="jflickrfeed/style.css" rel="stylesheet" type="text/css" media="all" /> 
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
	<script src="jflickrfeed/jflickrfeed.js"></script>

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
	<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.1.0/dist/MarkerCluster.css" />
	<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.1.0/dist/MarkerCluster.Default.css" />
	<script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
	<script src="https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.js"></script>
	<script src="https://unpkg.com/leaflet.markercluster@1.1.0/dist/leaflet.markercluster.js"></script>
	<script src="leaflet.filelayer.js"></script>
	<script src="togeojson.js"></script>

</head>


<body style="margin:0;height:100%;overflow-y:hidden">
<!--	<div id="divflickr">
		<p style="align:center; margin:4px">
			<a href="https://continentaldividetrail.org/explore-the-trail/">CDTC</a>
		</p>
		<select id="tagSelector" onchange="tagSelected()">
			<option value="cdt">CDT</option>
			<option value="">All</option>
		</select>
		<script>
			function tagSelected() {
				document.getElementById("flickrfeed").tagSelected = document.getElementById("tagSelector").value;
				console.log('redraw flickrfeed');
				$('#flickrfeed').hide().fadeIn('fast');
			}
		</script>  
		<ul id="flickrfeed"></ul>
		<script src="flickr.js"></script>
	</div>
-->
	<div id="divmap">
		<p id="msgmap">Planned and actual routes
			<a href="https://continentaldividetrail.org/explore-the-trail/">CDTC</a>
		</p>
		<a id="logo" href="https://continentaldividetrail.org/" target="_blank"></a>
		<div id="eltmap" style="width:100%; height:100%"></div>
		<script src="carte.js"></script>
	</div>

	<div id="divinsta"
                        onmousemove="toto()"
                        style="height:100%;width=25%;overflow-y:auto">
<!-- Juicer	--
		<iframe src="https://www.juicer.io/api/feeds/thierrysholidays/iframe?per=10"
				frameborder="0" scrolling="true" width="100%" height="100%">
			<ul class="juicer-feed" data-feed-id="thierrysholidays"
						data-pages="2"
						data-per="10"
						data-truncate="100"
						data-overlay="true"
						data-starting-at="2021-04-16"
						data-overlay="true">
			</ul>
		</iframe>
		<h1 class="referral"><a href="https://www.juicer.io">InstaFeed Powered by Juicer</a></h1></ul>
!--	-->
<!-- LightWidget WIDGET -->
                <button onclick="tutu()">HERE</button> 
		<script src="https://cdn.lightwidget.com/widgets/lightwidget.js"></script>
		<iframe id="igfeed"
                        src="https://cdn.lightwidget.com/widgets/b9c78f86ff165262b3093e1cbc23bbd1.html"
			scrolling="no" allowtransparency="true" class="lightwidget-widget"
			style="width:100%;height:100%;border:0;overflow-x:hidden;overflow-y:auto;"></iframe>
                        <!-- "pointer-events:none;" pour capter onmousexx mais tue lightwidget -->
		</iframe>
<!--	-->
	</div>

<div id="test">TEST</div>

<script>
let nnn=0;
function toto()
{
  nnn = nnn+1;
  document.getElementById('test').innerHTML = "<p>++" + nnn + "++</p>";
}
function tutu()
{
  // made by chatGPT
  var iframe = document.getElementById("igfeed");
  var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;      // Viole CORS
  var elements = iframeDoc.getElementsByTagName("*");
  var textList = [];
  for (var i = 0; i < elements.length; i++) {
    var elementText = elements[i].innerText;
    if (elementText) {
        textList.push(elementText);
    }
  }

  document.getElementById('test').innerHTML = "<p>" + textList + "</p>";
}
</script>

<script>
//setInterval(function(){
//    var element = $(':hover');
//    if (element.length)
//    {
//        var r = "";
//        for (let i = 0; i < element.length; i++)
//        {
//            var domElement = element[i];
//            var tagName = domElement.tagName;
//            var id = domElement.id ? ' id="' + domElement.id + '"' : "";
//            r = r + "<p>hover: &lt;" + tagName.toLowerCase() + id + "&gt;</p>";
//        }
//        document.getElementById('test').innerHTML = r;
//    }
//}, 1000);
</script>

</body>
</html>
